What I did for this exercice was first try to understand the new hierarchy. After some questions I finally go it and went to work
Basically I just had to implement an if else statement and check for if there is a new folder that is asked from me.
If there is none then I just copied the code from before. And if there was then I just added a intermediate folder in the hierarchy. Using the $1 to make the name dynamic.
Finally I made sure I handled all the errors.
Next step is to sanitize the input to make sure its all text.